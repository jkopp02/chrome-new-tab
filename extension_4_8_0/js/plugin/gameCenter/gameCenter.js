(function($){$.gameCenter=function(){return new gameCenter()};var gameCenter=(function(){var gameCenter=function(){};gameCenter.prototype={container:'',init:function(){var self=this;self.initGameCenterApp()},initGameCenterApp:function(){var self=this;self.container.find('.gameCenterApp').remove();var data=PDI.get('gameCenter');if(data!=''&&(new Date().getTime()-data.time<=1*3600000)){self.template(data)}else{$.get(urlImg+'myapp/gameCenter/api/index.php?ui_locale='+_langPre+'&t='+new Date().getTime(),function(data){if(data){var data=JSON.parse(data);data['time']=new Date().getTime();PDI.set('gameCenter','',data);self.template(data)}})}},template:function(data){var self=this;if(DBOX.width>=120&&DBOX.height>=120){self.container.find('.boxLogo').attr("bgHidden","true");var content='<div class="gameCenterApp"><div class="gameCenterMain"><div class="gameCenterLeft"><div class="gameCenterLogo" style="background-image:url('+data.gameLogo+');"></div><div class="gameCenterRateMain"><div class="gameCenterRateBg"></div><div class="gameCenterRate"></div></div></div><div class="gameCenterRight"><div class="gameCenterTitle">'+data.gameTitle+'</div><div class="gameCenterDesc">'+data.gameDesc+'</div><div class="gameCenterPlay">'+getI18nMsg('gameCenterPlayNow')+'</div></div></div></div>';self.container.append(content);self.container.find('.gameCenterApp').css("top",parseInt((DBOX.height-100)/2)+"px");self.container.find('.gameCenterRate').css("width",parseInt(data.rate*17)+"px");self.container.find('.gameCenterPlay').unbind('click').bind('click',function(){openTab(targetSwitch,data.url,tabID,ctrlKey)});if(DBOX.width<225||DBOX.radius>45){self.container.find(".gameCenterMain").addClass("small")}if(!self.container.hasClass('quick')){self.container.find('.boxLogo').addClass("hidden");if(DBOX.radius<30){self.container.find('.boxLogo').css('borderBottomColor','rgba(150, 150, 150, .6)');if(!DBOX.titleShow){self.container.find('.boxTitle').css('backgroundColor','rgba(150, 150, 150, .4)')}}}else{self.container.find('.boxLogo').removeClass("hidden")}}},getDialogContent:function(){var self=this;return'<div class="gameCenterContainer"><div class="gameCenterHeader"><div class="headerIcon"></div>'+getI18nMsg('gameCenterAppTitle')+'</div><div class="gameCenterBody"><iframe src="'+urlImg+'myapp/gameCenter/index.php?ui_locale='+_langPre+'&t='+new Date().getTime()+'" width="780" height="510" marginwidth="0" marginheight="0" hspace="0" vspace="0" frameborder="0" scrolling="auto"></iframe></div></div>'}};return gameCenter})()})(jq);var gameCenter=$.gameCenter();